install:
- true

script:
- set -e
- ./gradlew check --info --stacktrace --continue -Pcoverage -Pcompatibility
- source build/release/gradle/setGitVariables.sh
- ./gradlew release -Prelease.disableRemoteCheck -Prelease.localOnly --info --stacktrace
- ./gradlew finalizeRelease publishUploadedArtifacts -PbintrayUser=${BINTRAY_USER} -PbintrayKey=${BINTRAY_API_KEY} --info --stacktrace

after_success:
- ./gradlew jacocoTestReport coveralls -Pcoverage


language: groovy

jdk:
- oraclejdk8

matrix:
  include:
    # Release not skipped only in Java 7 build
    - jdk: oraclejdk7
      env: SKIP_RELEASE=false

env:
  global:
  - TERM=dumb
  - SKIP_RELEASE=true
  - secure: FGEiSTofVwcF2W4/FRQ3Bop50uY3BwrtygAAsbzx+/eztvfvnCbl4ZSydjtecOS/0PiSI7y5jmTPEb9WSNXXUO22OpdHyU25naE86LvESpJy6tBJt6T7+6o5DlGfdxCPDb96MDDvuNOLbIMOADYEng413FrpKlLBbIUd4Pme+D0=
  - secure: Dz5Jc7CsoUA+GiuXOgUepK6ZjzWcolVQVHTPUDDmux8bwaTs88IrEoyAvBz0CCa7+JohUa4j2jNyemAsxp8kg6uPWEoAdL/oirnvI/iP8zyMUpt/KySuASR58Irh/sVDxNss6r7G3vv5FAtg4IQUGPZEfFxW1AZu4WqaMpDg+TA=
  - secure: masU5RfbBiyULLqnHwteTL05AWpU3S20aiD4MJLhI/kQYD5PPQr+vYMEIoBuiS/yK3Zmwr0smLffKFW8U3g0m3ktpjtRaH3ceaepJb0Oq7OSroPc3+SBp671zkONDxLBwP2MeyXf+iSMwePoQAAZzwnfF7v/thyfHbUE9Y6YMl8=
